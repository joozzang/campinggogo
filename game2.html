<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ë„¤ ê¸€ì ë‹¨ì–´ (ì• ë‘ ê¸€ìë§Œ)</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      @font-face {
        font-family: "CookieRun-Regular";
        src: url("https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2001@1.1/CookieRun-Regular.woff")
          format("woff");
        font-weight: normal;
        font-style: normal;
      }
      body {overflow:hidden;
        margin:0;
        font-family: "CookieRun-Regular";
        background: linear-gradient(135deg, #2c64ff, #759aff);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
      }

      .word-display {
        font-size: 8rem;
        font-weight: bold;
        margin-bottom: 50px;
        padding: 80px;
        background-color: #eef3ff;
        border-radius: 20px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        min-width: 400px;
        text-align: center;
      }

      /* ìˆ«ì ì„ íƒ ë²„íŠ¼ ëª¨ì–‘ */
      .number-button {
        font-size: 3rem;
        padding: 35px 80px;
        margin: 0 10px 40px 10px;
        border-radius: 10px;
        border: none;
        background-color: #1976d2;
        color: white;
        cursor: pointer;
        transition: background-color 0.3s;
      }
      .number-button:hover {
        background-color: #115293;
      }

      .next-button,
      .restart-button {
        position: fixed;
        bottom: 15px;
        right: 20px;
        border-radius: 15px;
        padding: 20px 30px;
        font-size: 2rem;
        background-color: #fff;
        color: gray;
        border: none;
        cursor: pointer;
      }
      .next-button:hover,
      .restart-button:hover {
        background-color: #ddd;
      }

      .home-button {
        position: fixed;
        bottom: 15px;
        left: 20px;
        padding: 10px 20px;
        font-size: 3rem;
        background-color: #fff;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        text-decoration: none;
      }
      .home-button:hover {
        background-color: #1976d2;
        color: white;
      }

      /* ìˆ«ì ë²„íŠ¼ ì»¨í…Œì´ë„ˆ */
      #numberButtons {
        display: flex;
        justify-content: center;
        margin-bottom: 40px;
      }
    </style>
  </head>
  <body>
    <a href="start.html" class="home-button">ğŸ </a>

    <div id="numberButtons">
      <button class="number-button" onclick="startGame(3)">3</button>
      <button class="number-button" onclick="startGame(5)">5</button>
      <button class="number-button" onclick="startGame(7)">7</button>
      <button class="number-button" onclick="startGame(10)">10</button>
    </div>

    <div class="word-display" id="wordDisplay"></div>

    <button
      id="nextBtn"
      class="next-button"
      onclick="showNextWord()"
      style="display: none"
    >
      â–¶ï¸
    </button>
    <button
      id="restartBtn"
      class="restart-button"
      onclick="restartGame()"
      style="display: none"
    >
      â­ï¸
    </button>

    <script>
      const wordList = [
        "ë„ì›ê²°ì˜",
        "ì¹˜ì¦ˆë²„ê±°",
        "ëˆ„ë„¤ë ë„¤",
        "ì–´ì¥ê´€ë¦¬",
        "ì¹´í˜ë² ë„¤",
        "ë¸Œë¡œì½œë¦¬",
        "ì´ˆì½”íŒŒì´",
        "ëœì¥ì°Œê°œ",
        "ì‚¼ê°ê¹€ë°¥",
        "ì„œìš¸íŠ¹ë³„ì‹œ",
        "í˜¸ë‘ë‚˜ë¹„",
        "ê°œë¯¸í•¥ê¸°",
        "í˜„ì¥í•™ìŠµ",
        "ì‹ ìš©ì¹´ë“œ",
        "ë§ˆìš”ë„¤ì¦ˆ",
        "í”Œë¼ë°ê³ ",
        "ë”±ë”°êµ¬ë¦¬",
        "ê°ìíŠ€ê¹€",
        "ì—…ë°ì´íŠ¸",
        "ë¹„íŠ¸ì½”ì¸",
        "ì•„ì´ìŠ¤í¬ë¦¼",
        "ë°”ë‚˜ë‚˜í‚¥",
        "í•˜ì™€ì´ì•ˆ",
        "ë”¸ê¸°ìš°ìœ ",
        "ë ˆëª¬ì—ì´ë“œ",
      ];

      let selectedCount = 0;
      let currentIndex = 0;
      let currentRound = 0;
      const maxRounds = 3;

      let remainingIndexes = [];
      let currentRoundWords = [];

      const wordDisplay = document.getElementById("wordDisplay");
      const nextBtn = document.getElementById("nextBtn");
      const restartBtn = document.getElementById("restartBtn");
      const numberButtons = document.getElementById("numberButtons");

      // ì²˜ìŒì—” ìˆ«ì ë²„íŠ¼ë§Œ ë³´ì´ê³ , í…ìŠ¤íŠ¸ëŠ” ë¹ˆ ìƒíƒœ
      wordDisplay.textContent = "";

      // ë°°ì—´ ì„ê¸° í•¨ìˆ˜
      function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
      }

      function startGame(count) {
        selectedCount = count;
        currentIndex = 0;
        currentRound = 0;

        remainingIndexes = [];
        for (let i = 0; i < wordList.length; i++) {
          remainingIndexes.push(i);
        }
        shuffleArray(remainingIndexes);

        numberButtons.style.display = "none";
        nextBtn.style.display = "inline-block";
        restartBtn.style.display = "none";

        wordDisplay.textContent = "ì‹œì‘í•´ë³¼ê¹Œ?";
      }
      function showNextWord() {
        // ì²« í´ë¦­ ì‹œ 'ì‹œì‘í•´ë³¼ê¹Œ?' -> ë‹¤ìŒ í´ë¦­ë¶€í„° ë‹¨ì–´ ì¶œë ¥
        if (wordDisplay.textContent === "ì‹œì‘í•´ë³¼ê¹Œ?") {
          wordDisplay.textContent = "";
          currentRoundWords = remainingIndexes.splice(0, selectedCount);
          currentIndex = 0;
          currentRound++;
          return;
        }

        // ë‹¨ì–´ ë‹¤ ë³´ì—¬ì£¼ê³  ë‹¤ìŒ í´ë¦­ì— ë¬¸êµ¬ ì¶œë ¥í•˜ëŠ” ìƒíƒœì¸ì§€ ì²´í¬
        if (currentIndex === currentRoundWords.length) {
          // "ë’¤ì— ë.áŸ" ë³´ì—¬ì£¼ê¸°
          wordDisplay.textContent = "ê²Œì„ ì¢…ë£Œ!";
          currentIndex++; // ë‹¤ìŒ í´ë¦­ì— ë‹¤ìŒ ë¼ìš´ë“œ ë„˜ì–´ê°€ë„ë¡ ì¸ë±ìŠ¤ ì¦ê°€
          return;
        }

        // ë¬¸êµ¬ ë‹¤ ë³´ì—¬ì¤€ í›„ ë‹¤ìŒ í´ë¦­ ì‹œ ë‹¤ìŒ ë¼ìš´ë“œ ì¤€ë¹„
        if (currentIndex === currentRoundWords.length + 1) {
          if (currentRound >= maxRounds || remainingIndexes.length === 0) {
            wordDisplay.textContent = "ê²Œì„ ì¢…ë£Œ!";
            nextBtn.style.display = "none";
            restartBtn.style.display = "inline-block";
          } else {
            currentRoundWords = remainingIndexes.splice(0, selectedCount);
            currentIndex = 0;
            currentRound++;
            wordDisplay.textContent = "ì‹œì‘í•´ë³¼ê¹Œ?";
          }
          return;
        }

        // ë‹¨ì–´ ì¶œë ¥
        const word = wordList[currentRoundWords[currentIndex]];
        wordDisplay.textContent = word.slice(0, 2);
        currentIndex++;
      }

      function restartGame() {
        // selectedCount ìœ ì§€
        currentIndex = 0;
        currentRound = 0;

        remainingIndexes = [];
        for (let i = 0; i < wordList.length; i++) {
          remainingIndexes.push(i);
        }
        shuffleArray(remainingIndexes);

        currentRoundWords = [];
        wordDisplay.textContent = "ì‹œì‘í•´ë³¼ê¹Œ?";
        numberButtons.style.display = "none";
        nextBtn.style.display = "inline-block";
        restartBtn.style.display = "none";
      }
    </script>
  </body>
</html>
